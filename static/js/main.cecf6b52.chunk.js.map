{"version":3,"sources":["utils/routes.js","containers/Landing.js","App.js","index.js"],"names":["routes","path","component","lazy","Landing","handleConnect","type","onClick","App","useState","groupId","setGroupId","id","setId","url","window","location","search","history","useHistory","a","connect","sendPromise","useEffect","params","URLSearchParams","subscribe","detail","data","has","get","push","console","log","to","exact","map","route","key","send","ReactDOM","render","fallback","document","getElementById"],"mappings":"ueAqBeA,EAfA,CACX,CACIC,KAAM,YACNC,UAPSC,gBAAK,kBAAM,kCASxB,CACIF,KAAM,QACNC,UAVKC,gBAAK,kBAAM,kCAYpB,CACIF,KAAM,UACNC,UAbeC,gBAAK,kBAAM,mCCKnBC,EAPC,SAAC,GAAD,IAAGC,EAAH,EAAGA,cAAH,OACZ,oCACI,0JACA,4BAAQC,KAAK,SAASC,QAASF,GAA/B,8BCoEOG,EAjEH,WAAO,IAAD,EACaC,mBAAS,MADtB,mBACVC,EADU,KACDC,EADC,OAEGF,mBAAS,UAFZ,mBAEVG,EAFU,KAENC,EAFM,KAIXC,EAAMC,OAAOC,SAASC,OAEtBC,EAAUC,cANC,4CAgCjB,sBAAAC,EAAA,sEACOC,IAAQC,YAAY,0BAD3B,4CAhCiB,sBAuCjB,OA/BAC,qBAAU,WACT,IAAMC,EAAS,IAAIC,gBAAgBX,GACnCO,IAAQK,WAAU,YAAiC,IAAD,IAA7BC,OAAUrB,EAAmB,EAAnBA,KAAMsB,EAAa,EAAbA,KACvB,iCAATtB,GACHK,EAAWiB,MAKTJ,EAAOK,IAAI,gBACbhB,EAAMW,EAAOM,IAAI,gBAKflB,GACFM,EAAQa,KAAK,eAMb,CAACb,EAASN,EAAIE,IAMjBkB,QAAQC,IAAI,UAAWvB,GAItB,oCACGE,EAKD,oCACC,gCACC,4BACC,4BAAI,kBAAC,IAAD,CAASsB,GAAG,YAAYC,OAAK,GAA7B,aACJ,4BAAI,kBAAC,IAAD,CAASD,GAAG,UAAUC,OAAK,GAA3B,QACJ,4BAAI,kBAAC,IAAD,CAASD,GAAG,QAAQC,OAAK,GAAzB,WAGN,8BACC,kBAAC,IAAD,KACEnC,EAAOoC,KAAI,SAAAC,GAAK,OAAI,kBAAC,IAAD,CAAOC,IAAKD,EAAMpC,KAAMA,KAAMoC,EAAMpC,KAAMC,UAAWmC,EAAMnC,kBAdnF,oCACC,kBAAC,EAAD,CAASG,cA3CI,gDCElBgB,IAAQkB,KAAK,gBAQbC,IAASC,OACL,kBAAC,IAAD,KACI,kBAAC,WAAD,CAAUC,SAAU,qCAChB,kBAAC,EAAD,QAGRC,SAASC,eAAe,U","file":"static/js/main.cecf6b52.chunk.js","sourcesContent":["import { lazy } from 'react';\n\nconst Settings = lazy(() => import('containers/Settings'));\nconst Help = lazy(() => import('containers/Help'));\nconst WidgetSettings = lazy(() => import('containers/WidgetSettings'));\n\nconst routes = [\n    {\n        path: '/settings',\n        component: Settings\n    },\n    {\n        path: '/help',\n        component: Help\n    },\n    {\n        path: '/widget',\n        component: WidgetSettings\n    }\n];\n\nexport default routes;","import React from 'react';\n\nconst Landing = ({ handleConnect }) => (\n    <>\n        <p>Добавь меня в сообщесво</p>\n        <button type=\"button\" onClick={handleConnect}>Клик</button>\n    </>\n);\n\nexport default Landing;","import React, { useState, useEffect } from 'react';\nimport { NavLink, Route, Switch, useHistory } from 'react-router-dom';\nimport connect from '@vkontakte/vk-connect';\n\nimport routes from 'utils/routes'\n\nimport Landing from './containers/Landing';\n\nconst App = () => {\n\tconst [groupId, setGroupId] = useState(null);\n\tconst [id, setId] = useState('131313');\n\n\tconst url = window.location.search;\n\t// const params = new URLSearchParams(url);\n\tconst history = useHistory();\n\n\tuseEffect(() => {\n\t\tconst params = new URLSearchParams(url);\n\t\tconnect.subscribe(({ detail: { type, data } }) => {\n\t\t\tif (type === 'VKWebAppAddToCommunityResult') {\n\t\t\t\tsetGroupId(data);\n\t\t\t}\n\t\t});\n\n\t\tfunction hasApp() {\n\t\t\tif(params.has('vk_group_id')) {\n\t\t\t\tsetId(params.get('vk_group_id'));\n\t\t\t}\n\t\t}\n\n\t\tfunction handleRedirect() {\n\t\t\tif(id) {\n\t\t\t\thistory.push('/settings');\n\t\t\t}\n\t\t}\n\n\t\thasApp();\n\t\thandleRedirect();\n\t}, [history, id, url])\n\n\tasync function connectToGroup() {\n\t\tawait connect.sendPromise('VKWebAppAddToCommunity');\n\t}\n\n\tconsole.log(\"groupId\", groupId);\n\t// console.log(\"params\", params.get('vk_group_id'));\n\n\treturn (\n\t\t<>\n\t\t\t{!id ? (\n\t\t\t\t<>\n\t\t\t\t\t<Landing handleConnect={connectToGroup} />\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<header>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t<li><NavLink to=\"/settings\" exact>Settings</NavLink></li>\n\t\t\t\t\t\t\t<li><NavLink to=\"/widget\" exact>Pay</NavLink></li>\n\t\t\t\t\t\t\t<li><NavLink to=\"/help\" exact>Help</NavLink></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</header>\n\t\t\t\t\t<main>\n\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t{routes.map(route => <Route key={route.path} path={route.path} component={route.component} />)}\n\t\t\t\t\t\t</Switch>\n\t\t\t\t\t</main>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React, {Suspense} from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport { MemoryRouter } from 'react-router-dom';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(\n    <MemoryRouter>\n        <Suspense fallback={<div>...</div>}>\n            <App />\n        </Suspense>\n    </MemoryRouter>,\n    document.getElementById('root')\n );\n"],"sourceRoot":""}